<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Görüntü İşleme ile Kişi Sayımı</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Theme CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav style="background-color: black; opacity: 20%; margin-bottom: 10%;" class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Hüseyin Kavuncu</span>
                    Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="index.html">Kavuncu</a>
            </div>

            
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
               <ul class="nav navbar-nav navbar-right" style="padding-right: 11%;">
                     <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="about.html">About</a>
                    </li>
                </ul>
            </div>
           
        </div>
        
    </nav>
    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <div style="margin-bottom: 3%;"></div>
    <header class="intro-header" style="background-image: url('http://huseyinkavuncu.com/img/face/baslik.jpg'); height: 530px;">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <h1 style="font-size: 45px;">OpenCV İle Görüntü İşleme </h1>
                    <h2 class="subheading" style="font-size: 26px;">OpenCV nedir? Haar Cascade nedir?<br>Hazır kaynaklar ile nasıl görüntü işleme yapılır? Kodlama bilgisi olmadan nasıl yapılır?</h2>

                    <p>Merhabalar. Bu mini projede öncelikle ne kullandım. Yazılım dili olarak Pythonı kullandım. "haarcascade-frontalface-default.xml" dosyasını kullandım. Bu dosya haar cascade yöntemi ile oluşturulmuş bir xml dosyasıdır. Ayrıca OpenCV kütüphanesini kullandım.</p>

                    <p>OpenCV(Open Source Computer Vision Library) açık kaynak bir görüntü işleme(bilgisayar görüşü) kütüphanesidir. Bu kütüphane gerçek zamanlı olarak object detection(nesne tespiti, bilgisayar görmesi) yapılmasını sağlayan çeşitli fonksiyonlar içermektedir. Bu foksiyonlar özellikle görüntü işlemeye yeni başlayanlara büyük kolaylık sağlayacaktır. Tabii ki kendi eğittiğiniz bir yazılım sizin için daha iyi sonuç verecektir, burada kullandığımız xml dosyası genel amaçlı bir yüz tanıma dosyasıdır. Sizler de kendinizi geliştirerek kendi projenizin amacı doğrultusunda eğitebilirsiniz. Bu yazımda hazır kütüphane ve xml kullanarak yazılım bilgisi olmayan ilgili arkadaşların da bir şeyler yapabileceğini göstermek.</p>

                    <p style="display: inline;">Öncelikle python'ı bilgisayarımıza kurmamız gerekiyor. Bunun için eğer Windows kullanıcısı iseniz <a style="display: inline;" href="https://www.python.org/downloads/adresinden">https://www.python.org/downloads/adresinden</a> python indirebilirsiniz.</p><p> Linux kullanıcısı iseniz;</p>
                    <blockquote>-sudo apt-get update <br>-sudo apt-get install python3.7</blockquote>
                    <p>Komutları ile python3'ü indirebilirsiniz.</p>
                    <p>Python'ı indirdikten sonra sırada 2. adım OpenCV kütüphanesini indirmek var. Windows kullanıcı iseniz cmd(komut istemi)'e </p>
                    <blockquote>pip install opencv-python</blockquote> <p>komutunu yazıyoruz.</p>
                    <p>Eğer Linux kullanıcısı iseniz terminal'e; </p>
                    <blockquote>sudo apt-get install python-opencv</blockquote>
                    <p>Komutunu yazıyoruz.</p>
                    <p style="display: inline;">Son olarak ise OpenCV'nin github hesabından haarcascade_frontalface_default.xml dosyasını bu adresten <a style="display: inline;" href="https://github.com/opencv/opencv/blob/master/data/haarcascades/haarcascade_frontalface_default.xml">https://github.com/opencv/opencv/blob/master/data/haarcascades/haarcascade_frontalface_default.xml</a> indiriyoruz ve bu xml dosyasını proje dosyamıza atıyoruz.</p>

                    <img src="http://huseyinkavuncu.com/img/face/dosyalar.png" class="img-responsive" alt="">

                    <p>haarcascade-frontalface-default.xml dosyasını proje dosyamızın içine attıktak sonra kodlamaya başlayabiliriz.</p>

                    <img src="http://huseyinkavuncu.com/img/face/import.png" class="img-responsive" alt="">

                    <p>Öncelikle OpenCV kütüphanesini projemize import ediyoruz ve artık OpenCV fonksiyonlarını kullanabiliriz. İlk olarak kullanmamız gereken fonksiyon CascadeClassifier fonksiyonu(methodu). Bu method sayesinde haarcascade-frontalface-default.xml dosyasında bulunan sınıflandırmayı kullanmamızı sağlar. Classifier kelimesinin türkçesi de tam olarak sınıflandırıcıdır. Projemizin amacı insan saymak ve webcam karşısında ki insan sayısı en az 0 olabilir. Bu yüzden people diye bir değişkeni 0 yaptık.</p>

                    <img src="http://huseyinkavuncu.com/img/face/method.png" class="img-responsive" alt="">

                    <p>Yukarıda gördüğümüz fonksiyon tespit işlemini yapan fonksiyon. frame parametsini alıyor. frame'i videoda bulunan her bir an olarak düşünebilirsiniz, yani birer fotoğraf gibi. Şimdi bu method ile tek tek işleyeceğiz. Öncelikle haar cascade yöntemi siyah-beyaz görüntülerde tespit yapabildiği için resmi cvtColor() methodu ile siyah-beyaz'a çevirdik. Bu siyah-beyaz görüntüyü detectMultiScale() methodu ile yüz algılıyoruz. Burada tekrar people değişkenini 0 yapıyoruz, çünkü her frame için 0'dan başlayarak kişi tespit edildikçe arttıracağız. Bir döngü kullanıyoruz tespit edilen yüzlerin üzerinde öncelikle rectangle() methodu ile bir dikdörtgen oluşturuyoruz ve sağ üst tarafına "Detected" yazısı yazdırıyoruz. Hazır bir yüz tespit edilmişken people değişkenini bir arttırıyoruz. Kullanmış olduğumuz for döngüsü sonlandığında frame'de kaç adet yüz varsa o kadar people değişkeni arttırılmış olacağız. Örneğin dört kişi varsa, 0 dört kez arttırılacak ve people değişkeni dört olacak. Döngü bittiğine göre putText() methodu ile artık tespit edilen kişi sayısını ekrana yazdırabiliriz. Artık bu frame ile işimiz bittiğine göre bu frame'i return yapabilir, yani sonuçlandırıp geri gönderebiliriz.</p>

                    <img src="http://huseyinkavuncu.com/img/face/main.png" class="img-responsive" alt="">

                    <p>Sıra geldi kameramızdan görüntüyü alıp fonksiyonumuzu kullanarak anlık görüntü işleme işlemini yapmaya. Öncelikle VideoCapture() methodu ile kameramızdan görüntüyü alıyoruz. Bu method'a parametre olarak 0 verdim, çünkü bu programı dizüstü bilgisayarımın kamerasını kullandım. Eğer sizin ikinci, üçüncü kameranızı bu parametreyi 0, 1, 2.. gibi parametreler ile kullanabilirsiniz. Öncelikle sonsuz bir döngü oluşturuyoruz. Bu döngünün yapması gereken ilk işlem read() methodu ile görüntüyü parse(parçalara ayırmak) etmek. Bu sayede frame'leri elde edebiliriz. Elde ettiğimiz bu frame'i yazmış olduğumuz detect() methoduna parametre olarak gönderiyoruz ve canvas değişkeninde işlenmiş frame'i elde ediyoruz. Bu canvas'ı(işlenmiş frame) ekrana imshow() method'u ile gösteriyoruz. Kameramızdan gelen video frame'lere ayrılıyor, işleniyor, işlenen frame'ler sayesinde ekranda görüntülüyoruz. Bu sonsuz döngüyü sonlandırmak için de ord() method'unu kullanıyoruz. Döngü bittikten sonra release() methodu ile ram'i temizliyor ve destroyAllWindows() methodu ile açık olan pencereleri sonlandırıyoruz.</p>

                    <p>Bu projenin tamamını GitHub hesabımda paylaştım. İsteyenler, ihtiyaç duyanlar <a href="http://huseyinkavuncu.com/face_counter_with_haar-cascade">buradan</a> doğrudan dosyalara erişim sağlayabilir ve kullanabilirler.</p>

                    <a href="index.html">
                        <span style="color: black; opacity: 50%; padding-left: 38%;" class="meta">Posted by <a href="index.html">Hüseyin KAVUNCU</a> on April 6, 2020</span>
                    </a>

                </div>
            </div>
        </div>
    </article>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://www.instagram.com/kavuncu_azade_">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/in/h%C3%BCseyin-kavuncu-664485177">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/esasadam06">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="mailto:hsynkavuncu.6@gmail.com">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
               
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>

</body>

</html>
